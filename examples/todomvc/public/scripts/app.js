!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t,e,n,r,o){return{sel:t,data:e,children:n,text:r,elm:o,key:void 0===e?void 0:e.key}}function e(t){return null!=t&&"object"==(void 0===t?"undefined":d(t))}function n(t){if(!e(t)||w.call(t)!=h)return!1;var n=k(t);if(null===n)return!0;var r=b.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&g.call(r)==_}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function o(t,e){var n=void 0,r=e.elm,o=t.data.attrs,i=e.data.attrs;if((o||i)&&o!==i){o=o||{},i=i||{};for(n in i){var a=i[n];o[n]!==a&&(N[n]?a?r.setAttribute(n,""):r.removeAttribute(n):n.charCodeAt(0)!==S?r.setAttribute(n,a):n.charCodeAt(3)===B?r.setAttributeNS(L,n,a):n.charCodeAt(5)===B?r.setAttributeNS(A,n,a):r.setAttribute(n,a))}for(n in o)n in i||r.removeAttribute(n)}}function i(t,e){var n,r,o=e.elm,i=t.data.props,a=e.data.props;if((i||a)&&i!==a){i=i||{},a=a||{};for(n in i)a[n]||delete o[n];for(n in a)r=a[n],i[n]===r||"value"===n&&o[n]===r||(o[n]=r)}}function a(t,e,n){if("function"==typeof t)t.call(e,n,e);else if("object"===(void 0===t?"undefined":d(t)))if("function"==typeof t[0])if(2===t.length)t[0].call(e,t[1],n,e);else{var r=t.slice(1);r.push(n),r.push(e),t[0].apply(e,r)}else for(var o=0;o<t.length;o++)a(t[o])}function s(t,e){var n=t.type,r=e.data.on;r&&r[n]&&a(r[n],e,t)}function l(){return function t(e){s(e,t.vnode)}}function u(t,e){var n,r=t.data.on,o=t.listener,i=t.elm,a=e&&e.data.on,s=e&&e.elm;if(r!==a){if(r&&o)if(a)for(n in r)a[n]||i.removeEventListener(n,o,!1);else for(n in r)i.removeEventListener(n,o,!1);if(a){var u=e.listener=t.listener||l();if(u.vnode=e,r)for(n in a)r[n]||s.addEventListener(n,u,!1);else for(n in a)s.addEventListener(n,u,!1)}}}function c(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var r=0;r<e.length;++r){var o=e[r].data;void 0!==o&&c(o,e[r].children,e[r].sel)}}for(var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},h="[object Object]",p="object"==("undefined"==typeof global?"undefined":d(global))&&global&&global.Object===Object&&global,v="object"==("undefined"==typeof self?"undefined":d(self))&&self&&self.Object===Object&&self,y=(p||v||Function("return this")(),Function.prototype),m=Object.prototype,g=y.toString,b=m.hasOwnProperty,_=g.call(Object),w=m.toString,k=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),O=r(function(t,e){function n(t,e,n,r,o){return{sel:t,data:e,children:n,text:r,elm:o,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=n,e.default=n}),P=r(function(t,e){function n(t){return"string"==typeof t||"number"==typeof t}Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=n}),E=r(function(t,e){function n(t){return document.createElement(t)}function r(t,e){return document.createElementNS(t,e)}function o(t){return document.createTextNode(t)}function i(t){return document.createComment(t)}function a(t,e,n){t.insertBefore(e,n)}function s(t,e){t.removeChild(e)}function l(t,e){t.appendChild(e)}function u(t){return t.parentNode}function c(t){return t.nextSibling}function d(t){return t.tagName}function f(t,e){t.textContent=e}function h(t){return t.textContent}function p(t){return 1===t.nodeType}function v(t){return 3===t.nodeType}function y(t){return 8===t.nodeType}Object.defineProperty(e,"__esModule",{value:!0}),e.htmlDomApi={createElement:n,createElementNS:r,createTextNode:o,createComment:i,insertBefore:a,removeChild:s,appendChild:l,parentNode:u,nextSibling:c,tagName:d,setTextContent:f,getTextContent:h,isElement:p,isText:v,isComment:y},e.default=e.htmlDomApi}),C=r(function(t,e){function n(t,e,r){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==r&&void 0!==e)for(var o=0;o<e.length;++o){var i=e[o].data;void 0!==i&&n(i,e[o].children,e[o].sel)}}function r(t,e,r){var o,i,a,s={};if(void 0!==r?(s=e,P.array(r)?o=r:P.primitive(r)?i=r:r&&r.sel&&(o=[r])):void 0!==e&&(P.array(e)?o=e:P.primitive(e)?i=e:e&&e.sel?o=[e]:s=e),P.array(o))for(a=0;a<o.length;++a)P.primitive(o[a])&&(o[a]=O.vnode(void 0,void 0,void 0,o[a]));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||n(s,o,t),O.vnode(t,s,o,i,void 0)}Object.defineProperty(e,"__esModule",{value:!0}),e.h=r,e.default=r}),j=r(function(t,e){function n(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function r(t){var e=t.data;n(e.fn.apply(void 0,e.args),t)}function o(t,e){var r,o=t.data,i=e.data,a=o.args,s=i.args;if(o.fn===i.fn&&a.length===s.length){for(r=0;r<s.length;++r)if(a[r]!==s[r])return void n(i.fn.apply(void 0,s),e);n(t,e)}else n(i.fn.apply(void 0,s),e)}Object.defineProperty(e,"__esModule",{value:!0}),e.thunk=function(t,e,n,i){return void 0===i&&(i=n,n=e,e=void 0),C.h(t,{key:e,hook:{init:r,prepatch:o},fn:n,args:i})},e.default=e.thunk}),x=r(function(t,e){function n(t){return void 0===t}function r(t){return void 0!==t}function o(t,e){return t.key===e.key&&t.sel===e.sel}function i(t){return void 0!==t.sel}function a(t,e,n){var r,o,i,a={};for(r=e;r<=n;++r)null!=(i=t[r])&&void 0!==(o=i.key)&&(a[o]=r);return a}function s(t,e){function s(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return O.default(_.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}function c(t,e){return function(){if(0==--e){var n=_.parentNode(t);_.removeChild(n,t)}}}function d(t,e){var o,i=t.data;void 0!==i&&r(o=i.hook)&&r(o=o.init)&&(o(t),i=t.data);var a=t.children,s=t.sel;if("!"===s)n(t.text)&&(t.text=""),t.elm=_.createComment(t.text);else if(void 0!==s){var u=s.indexOf("#"),c=s.indexOf(".",u),f=u>0?u:s.length,h=c>0?c:s.length,p=-1!==u||-1!==c?s.slice(0,Math.min(f,h)):s,v=t.elm=r(i)&&r(o=i.ns)?_.createElementNS(o,p):_.createElement(p);for(f<h&&v.setAttribute("id",s.slice(f+1,h)),c>0&&v.setAttribute("class",s.slice(h+1).replace(/\./g," ")),o=0;o<b.create.length;++o)b.create[o](l,t);if(P.array(a))for(o=0;o<a.length;++o){var y=a[o];null!=y&&_.appendChild(v,d(y,e))}else P.primitive(t.text)&&_.appendChild(v,_.createTextNode(t.text));r(o=t.data.hook)&&(o.create&&o.create(l,t),o.insert&&e.push(t))}else t.elm=_.createTextNode(t.text);return t.elm}function f(t,e,n,r,o,i){for(;r<=o;++r){var a=n[r];null!=a&&_.insertBefore(t,d(a,i),e)}}function h(t){var e,n,o=t.data;if(void 0!==o){for(r(e=o.hook)&&r(e=e.destroy)&&e(t),e=0;e<b.destroy.length;++e)b.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)null!=(e=t.children[n])&&"string"!=typeof e&&h(e)}}function p(t,e,n,o){for(;n<=o;++n){var i=void 0,a=void 0,s=void 0,l=e[n];if(null!=l)if(r(l.sel)){for(h(l),a=b.remove.length+1,s=c(l.elm,a),i=0;i<b.remove.length;++i)b.remove[i](l,s);r(i=l.data)&&r(i=i.hook)&&r(i=i.remove)?i(l,s):s()}else _.removeChild(t,l.elm)}}function v(t,e,r,i){for(var s,l,u,c=0,h=0,v=e.length-1,m=e[0],g=e[v],b=r.length-1,w=r[0],k=r[b];c<=v&&h<=b;)null==m?m=e[++c]:null==g?g=e[--v]:null==w?w=r[++h]:null==k?k=r[--b]:o(m,w)?(y(m,w,i),m=e[++c],w=r[++h]):o(g,k)?(y(g,k,i),g=e[--v],k=r[--b]):o(m,k)?(y(m,k,i),_.insertBefore(t,m.elm,_.nextSibling(g.elm)),m=e[++c],k=r[--b]):o(g,w)?(y(g,w,i),_.insertBefore(t,g.elm,m.elm),g=e[--v],w=r[++h]):(void 0===s&&(s=a(e,c,v)),n(l=s[w.key])?(_.insertBefore(t,d(w,i),m.elm),w=r[++h]):((u=e[l]).sel!==w.sel?_.insertBefore(t,d(w,i),m.elm):(y(u,w,i),e[l]=void 0,_.insertBefore(t,u.elm,m.elm)),w=r[++h]));c>v?f(t,null==r[b+1]?null:r[b+1].elm,r,h,b,i):h>b&&p(t,e,c,v)}function y(t,e,o){var i,a;r(i=e.data)&&r(a=i.hook)&&r(i=a.prepatch)&&i(t,e);var s=e.elm=t.elm,l=t.children,u=e.children;if(t!==e){if(void 0!==e.data){for(i=0;i<b.update.length;++i)b.update[i](t,e);r(i=e.data.hook)&&r(i=i.update)&&i(t,e)}n(e.text)?r(l)&&r(u)?l!==u&&v(s,l,u,o):r(u)?(r(t.text)&&_.setTextContent(s,""),f(s,null,u,0,u.length-1,o)):r(l)?p(s,l,0,l.length-1):r(t.text)&&_.setTextContent(s,""):t.text!==e.text&&_.setTextContent(s,e.text),r(a)&&r(i=a.postpatch)&&i(t,e)}}var m,g,b={},_=void 0!==e?e:E.default;for(m=0;m<u.length;++m)for(b[u[m]]=[],g=0;g<t.length;++g){var w=t[g][u[m]];void 0!==w&&b[u[m]].push(w)}return function(t,e){var n,r,a,l=[];for(n=0;n<b.pre.length;++n)b.pre[n]();for(i(t)||(t=s(t)),o(t,e)?y(t,e,l):(r=t.elm,a=_.parentNode(r),d(e,l),null!==a&&(_.insertBefore(a,e.elm,_.nextSibling(r)),p(a,[t],0,0))),n=0;n<l.length;++n)l[n].data.hook.insert(l[n]);for(n=0;n<b.post.length;++n)b.post[n]();return e}}Object.defineProperty(e,"__esModule",{value:!0});var l=O.default("",{},[],void 0,void 0),u=["create","update","remove","destroy","pre","post"];e.h=C.h,e.thunk=j.thunk,e.init=s}).init,M=r(function(t,e){function n(t,e){var n,r,o=e.elm,i=t.data.class,a=e.data.class;if((i||a)&&i!==a){i=i||{},a=a||{};for(r in i)a[r]||o.classList.remove(r);for(r in a)(n=a[r])!==i[r]&&o.classList[n?"add":"remove"](r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:n,update:n},e.default=e.classModule}).classModule,T=r(function(t,e){function n(t,e){var n,o=e.elm,i=t.data.dataset,a=e.data.dataset;if((i||a)&&i!==a){i=i||{},a=a||{};var s=o.dataset;for(n in i)a[n]||(s?delete s[n]:o.removeAttribute("data-"+n.replace(r,"-$&").toLowerCase()));for(n in a)i[n]!==a[n]&&(s?s[n]=a[n]:o.setAttribute("data-"+n.replace(r,"-$&").toLowerCase(),a[n]))}}Object.defineProperty(e,"__esModule",{value:!0});var r=/[A-Z]/g;e.datasetModule={create:n,update:n},e.default=e.datasetModule}).datasetModule,D=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],A="http://www.w3.org/1999/xlink",L="http://www.w3.org/XML/1998/namespace",B=58,S=120,N=Object.create(null),I=0,R=D.length;I<R;I++)N[D[I]]=!0;var z={create:o,update:o},G={create:i,update:i},F=r(function(t,e){function n(t,e,n){v(function(){t[e]=n})}function r(t){var e;if(document.createRange){var n=document.createRange();n.selectNodeContents(t),n.getBoundingClientRect&&(e=n.getBoundingClientRect())}return e}function o(t,e,n){return t&&e?e.left+e.width/2-n.left+"px "+(e.top+e.height/2-n.top)+"px":"0 0"}function i(t,e){return t&&e?t.left+t.width/2-(e.left+e.width/2):0}function a(t,e){return t&&e?t.top+t.height/2-(e.top+e.height/2):0}function s(t){return 1===t.childNodes.length&&3===t.childNodes[0].nodeType}function l(){f={},h=[]}function u(t,e){var n=e.data.hero;n&&n.id&&(h.push(n.id),h.push(e))}function c(t){var e=t.data.hero;if(e&&e.id){var n=t.elm;t.isTextNode=s(n),t.boundingRect=n.getBoundingClientRect(),t.textRect=t.isTextNode?r(n.childNodes[0]):null;var o=window.getComputedStyle(n,void 0);t.savedStyle=JSON.parse(JSON.stringify(o)),f[e.id]=t}}function d(){var t,e,l,u,c,d,p,v,y,m,g,b,_,w,k,O,P,E,C;for(t=0;t<h.length;t+=2)if(e=h[t],l=h[t+1].elm,u=f[e]){P=u.isTextNode&&s(l),w=l.style,O=window.getComputedStyle(l,void 0),k=(c=u.elm).style,y=l.getBoundingClientRect(),v=u.boundingRect,P?(E=r(l.childNodes[0]),m=i(C=u.textRect,E),g=a(C,E)):(m=v.left-y.left,g=v.top-y.top),d=y.height/Math.max(v.height,1),p=P?d:y.width/Math.max(v.width,1),b=w.transform,_=w.transition,"inline"===O.display&&(w.display="inline-block"),w.transition=_+"transform 0s",w.transformOrigin=o(P,E,y),w.opacity="0",w.transform=b+"translate("+m+"px, "+g+"px) scale("+1/p+", "+1/d+")",n(w,"transition",_),n(w,"transform",b),n(w,"opacity","1");for(var j in u.savedStyle)if(parseInt(j)!=j){var x="ms"===j.substring(0,2),M="moz"===j.substring(0,3),T="webkit"===j.substring(0,6);x||M||T||(k[j]=u.savedStyle[j])}k.position="absolute",k.top=v.top+"px",k.left=v.left+"px",k.width=v.width+"px",k.height=v.height+"px",k.margin="0",k.transformOrigin=o(P,C,v),k.transform="",k.opacity="1",document.body.appendChild(c),n(k,"transform","translate("+-m+"px, "+-g+"px) scale("+p+", "+d+")"),n(k,"opacity","0"),c.addEventListener("transitionend",function(t){"transform"===t.propertyName&&document.body.removeChild(t.target)})}f=h=void 0}Object.defineProperty(e,"__esModule",{value:!0});var f,h,p="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,v=function(t){p(function(){p(t)})};e.heroModule={pre:l,create:u,destroy:c,post:d},e.default=e.heroModule}).heroModule,V=r(function(t,e){function n(t,e,n){s(function(){t[e]=n})}function r(t,e){var r,o,i=e.elm,a=t.data.style,s=e.data.style;if((a||s)&&a!==s){a=a||{},s=s||{};var l="delayed"in a;for(o in a)s[o]||("-"===o[0]&&"-"===o[1]?i.style.removeProperty(o):i.style[o]="");for(o in s)if(r=s[o],"delayed"===o&&s.delayed)for(var u in s.delayed)r=s.delayed[u],l&&r===a.delayed[u]||n(i.style,u,r);else"remove"!==o&&r!==a[o]&&("-"===o[0]&&"-"===o[1]?i.style.setProperty(o,r):i.style[o]=r)}}function o(t){var e,n,r=t.elm,o=t.data.style;if(o&&(e=o.destroy))for(n in e)r.style[n]=e[n]}function i(t,e){var n=t.data.style;if(n&&n.remove){var r,o,i=t.elm,a=0,s=n.remove,l=0,u=[];for(r in s)u.push(r),i.style[r]=s[r];for(var c=(o=getComputedStyle(i))["transition-property"].split(", ");a<c.length;++a)-1!==u.indexOf(c[a])&&l++;i.addEventListener("transitionend",function(t){t.target===i&&--l,0===l&&e()})}else e()}Object.defineProperty(e,"__esModule",{value:!0});var a="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,s=function(t){a(function(){a(t)})};e.styleModule={create:r,update:r,destroy:o,remove:i},e.default=e.styleModule}).styleModule,q={create:u,update:u,destroy:u},U=function(t){return"string"==typeof t},H=function(t){return U(t)||"number"==typeof t},J=function(t){return t instanceof Element},W=function(e){return function(){for(var r=e,o={attrs:{},props:{}},i=void 0,a=[],s=void 0,l=arguments.length,u=Array(l),d=0;d<l;d++)u[d]=arguments[d];for(s=0;s<u.length;s++){var h=n(i=u[s]||{}),p=i.hasOwnProperty("sel");if(!h||p)Array.isArray(i)?a=[].concat(f(a),f(i)):(h&&p||H)&&a.push(i);else{var v=Object.keys(i);(i.hasOwnProperty("id")||i.hasOwnProperty("#"))&&(r+="#"+i.id,!0),(i.hasOwnProperty("class")||i.hasOwnProperty("."))&&(r+="."+i.class,!0),v.forEach(function(t){if(["id","#","class","."].indexOf(t)<0)switch(t){case"e":case"event":o.on=i[t];break;case"p":case"props":o.props=i[t];case"h":case"hook":o.hook=i[t];break;case"$":case"style":o.style=i[t];break;case"d":case"dataset":o.dataset=i[t];break;default:o.attrs[t]=i[t]}})}}for(s=0;s<a.length;++s)H(a[s])&&(a[s]=t(void 0,void 0,void 0,a[s]));return"s"!==r[0]||"v"!==r[1]||"g"!==r[2]||3!==r.length&&"."!==r[3]&&"#"!==r[3]||c(o,a,r),t(r,o,a,void 0,void 0)}},$=W("a"),K=W("button"),X=W("DIV"),Z=W("footer"),Q=W("h1"),Y=W("header"),tt=W("input"),et=W("label"),nt=W("li"),rt=W("p"),ot=W("section"),it=W("span"),at=W("strong"),st=W("ul"),lt=(W("handler"),x([M,G,z,F,V,T,q])),ut=function(){var t=void 0,e=void 0,n=void 0,r=document;return function(o,i,a){U(o)?o===n||a||(e=r.querySelector(o),n=o):J(o)&&!a&&o!==n&&(e=o),t||lt(e,i),t&&t!==i&&lt(t,i),t=i}}(),ct=(Array.isArray,function(t){var e=t.itemsLeft,n=t.all,r=t.active,o=t.completed,i=t.clearComplete,a=t.clearCompletedButton,s=t.viewState;return Z({class:"footer"},it({class:"todo-count"},at(e)," items left"),st({class:"filters"},nt($({class:s.all,href:"#/",event:n},"All")),nt($({class:s.active,href:"#/active",event:r},"Active")),nt($({class:s.completed,href:"#/completed",event:o},"Completed"))),K({class:"clear-completed",event:i,style:{display:a}},"Clear completed"))}),dt={content:{heading:"todos",placeholder:"What needs to be done?",toggleAll:"Mark all as complete",all:"All",active:"Active",completed:"Completed",clearCompleted:"Clear completed",info:["Double-click to edit a todo",'Created by <a href="http://twitter.com/oscargodson">Oscar Godson</a>','Refactored by <a href="https://github.com/cburgmer">Christoph Burgmer</a>','Part of <a href="http://todomvc.com">TodoMVC</a>'],itemsLeft:" items left"},defaults:{view:"all",editing:!1,todoItems:[],enableLocalStorage:!0,limitTodos:!1,backgroundColor:"",titleColor:"",tickColor:""},dataSets:{actions:{ADD_TODO:"ADD_TODO",DELETE_TODO:"DELETE_TODO",EDIT_TODO:"EDIT_TODO",CANCEL_EDIT_TODO:"CANCEL_EDIT_TODO",COMPLETE_TODO:"COMPLETE_TODO",COMPLETE_ALL:"COMPLETE_ALL",SET_ROUTE:"SET_ROUTE",TOGGLE_COMPLETED:"TOGGLE_COMPLETED",CLEAR_COMPLETED:"CLEAR_COMPLETED"}}};!function(t){if("object"===("undefined"==typeof exports?"undefined":d(exports))&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Baobab=t()}}(function(){return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){(function(){function t(t,e){var n,r={};for(n in t)r[n]=t[n];for(n in e)r[n]=e[n];return r}function r(t){return t&&"object"===(void 0===t?"undefined":d(t))&&!Array.isArray(t)&&!(t instanceof Function)&&!(t instanceof RegExp)}function o(t,e,n){var r,o,i,a;for(o in t)e.call(n||null,o,t[o]);if(Object.getOwnPropertySymbols)for(i=0,a=(r=Object.getOwnPropertySymbols(t)).length;i<a;i++)e.call(n||null,r[i],t[r[i]])}function i(t,e){var n,r,o=[];for(r=0,n=(t=t||[]).length;r<n;r++)t[r].fn!==e&&o.push(t[r]);return o}var a={once:"boolean",scope:"object"},s=0,l=function(){this._enabled=!0,this.unbindAll()};l.prototype.unbindAll=function(){return this._handlers={},this._handlersAll=[],this._handlersComplex=[],this},l.prototype.on=function(t,e,n){var i,l,u,c,f,h,p;if(r(t))return o(t,function(t,n){this.on(t,n,e)},this),this;for("function"==typeof t&&(n=e,e=t,t=null),i=0,l=(f=[].concat(t)).length;i<l;i++){if(c=f[i],p={order:s++,fn:e},"string"==typeof c||"symbol"===(void 0===c?"undefined":d(c)))this._handlers[c]||(this._handlers[c]=[]),h=this._handlers[c],p.type=c;else if(c instanceof RegExp)h=this._handlersComplex,p.pattern=c;else{if(null!==c)throw Error("Emitter.on: invalid event.");h=this._handlersAll}for(u in n||{})a[u]&&(p[u]=n[u]);h.push(p)}return this},l.prototype.once=function(){var e=Array.prototype.slice.call(arguments),n=e.length-1;return r(e[n])&&e.length>1?e[n]=t(e[n],{once:!0}):e.push({once:!0}),this.on.apply(this,e)},l.prototype.off=function(t,e){var n,a,s,l;if(1===arguments.length&&"function"==typeof t){e=arguments[0];for(s in this._handlers)this._handlers[s]=i(this._handlers[s],e),0===this._handlers[s].length&&delete this._handlers[s];this._handlersAll=i(this._handlersAll,e),this._handlersComplex=i(this._handlersComplex,e)}else if(1!==arguments.length||"string"!=typeof t&&"symbol"!==(void 0===t?"undefined":d(t)))if(2===arguments.length){var u=[].concat(t);for(n=0,a=u.length;n<a;n++)l=u[n],this._handlers[l]=i(this._handlers[l],e),0===(this._handlers[l]||[]).length&&delete this._handlers[l]}else r(t)&&o(t,this.off,this);else delete this._handlers[t];return this},l.prototype.listeners=function(t){var e,n,r,o=this._handlersAll||[],i=!1;if(!t)throw Error("Emitter.listeners: no event provided.");for(o=o.concat(this._handlers[t]||[]),n=0,r=this._handlersComplex.length;n<r;n++)e=this._handlersComplex[n],~t.search(e.pattern)&&(i=!0,o.push(e));return this._handlersAll.length||i?o.sort(function(t,e){return t.order-e.order}):o.slice(0)},l.prototype.emit=function(t,e){if(!this._enabled)return this;if(r(t))return o(t,this.emit,this),this;var n,i,a,s,l,u,c,d,f=[].concat(t),h=[];for(l=0,c=f.length;l<c;l++){for(u=0,d=(a=this.listeners(f[l])).length;u<d;u++)s=a[u],n={type:f[l],target:this},arguments.length>1&&(n.data=e),s.fn.call("scope"in s?s.scope:this,n),s.once&&h.push(s);for(u=h.length-1;u>=0;u--)(i=h[u].type?this._handlers[h[u].type]:h[u].pattern?this._handlersComplex:this._handlersAll).splice(i.indexOf(h[u]),1)}return this},l.prototype.kill=function(){this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1,this.unbindAll=this.on=this.once=this.off=this.emit=this.listeners=Function.prototype},l.prototype.disable=function(){return this._enabled=!1,this},l.prototype.enable=function(){return this._enabled=!0,this},l.version="3.1.1",void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=l),n.Emitter=l):this.Emitter=l}).call(this)},{}],2:[function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":d(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return"λ"+t.map(function(t){return f.default.function(t)||f.default.object(t)?"#"+P()+"#":t}).join("λ")}n.__esModule=!0;var s=r(t("emmett")),l=r(t("./cursor")),u=t("./monkey"),c=r(t("./watcher")),f=r(t("./type")),h=r(t("./update")),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./helpers")),v=p.arrayFrom,y=p.coercePath,m=p.deepFreeze,g=p.getIn,b=p.makeError,_=p.deepClone,w=p.deepMerge,k=p.shallowClone,O=p.shallowMerge,P=p.uniqid,E={autoCommit:!0,asynchronous:!0,immutable:!0,lazyMonkeys:!0,persistent:!0,pure:!0,validate:null,validationBehavior:"rollback"},C=function(t){function e(n,r){var i=this;if(o(this,e),t.call(this),arguments.length<1&&(n={}),!f.default.object(n)&&!f.default.array(n))throw b("Baobab: invalid data.",{data:n});this.options=O({},E,r),this.options.persistent||(this.options.immutable=!1,this.options.pure=!1),this._identity="[object Baobab]",this._cursors={},this._future=null,this._transaction=[],this._affectedPathsIndex={},this._monkeys={},this._previousData=null,this._data=n,this.root=new l.default(this,[],"λ"),delete this.root.release,this.options.immutable&&m(this._data);var a=function(t){i[t]=function(){var e=this.root[t].apply(this.root,arguments);return e instanceof l.default?this:e}};["apply","clone","concat","deepClone","deepMerge","exists","get","push","merge","pop","project","serialize","set","shift","splice","unset","unshift"].forEach(a),this._refreshMonkeys();var s=this.validate();if(s)throw Error("Baobab: invalid data.",{error:s})}return i(e,t),e.prototype._refreshMonkeys=function(t,e,n){var r=this,o=function t(e){var n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(e instanceof u.MonkeyDefinition||e instanceof u.Monkey){var o=new u.Monkey(r,n,e instanceof u.Monkey?e.definition:e);return void h.default(r._monkeys,n,{type:"set",value:o},{immutable:!1,persistent:!1,pure:!1})}if(f.default.object(e))for(var i in e)t(e[i],n.concat(i))};if(arguments.length){var i=g(this._monkeys,e).data;i&&function t(e){var n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(e instanceof u.Monkey)return e.release(),void h.default(r._monkeys,n,{type:"unset"},{immutable:!1,persistent:!1,pure:!1});if(f.default.object(e))for(var o in e)t(e[o],n.concat(o))}(i,e),"unset"!==n&&o(t,e)}else o(this._data);return this},e.prototype.validate=function(t){var e=this.options,n=e.validate,r=e.validationBehavior;if("function"!=typeof n)return null;var o=n.call(this,this._previousData,this._data,t||[[]]);return o instanceof Error?("rollback"===r&&(this._data=this._previousData,this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data),this.emit("invalid",{error:o}),o):null},e.prototype.select=function(t){if(t=t||[],arguments.length>1&&(t=v(arguments)),!f.default.path(t))throw b("Baobab.select: invalid path.",{path:t});var e=a(t=[].concat(t)),n=this._cursors[e];return n||(n=new l.default(this,t,e),this._cursors[e]=n),this.emit("select",{path:t,cursor:n}),n},e.prototype.update=function(t,e){var n=this;if(t=y(t),!f.default.operationType(e.type))throw b('Baobab.update: unknown operation type "'+e.type+'".',{operation:e});var r=g(this._data,t),o=r.solvedPath,i=r.exists;if(!o)throw b("Baobab.update: could not solve the given path.",{path:o});var s=f.default.monkeyPath(this._monkeys,o);if(s&&o.length>s.length)throw b("Baobab.update: attempting to update a read-only path.",{path:o});if("unset"!==e.type||i){var l=e;if(/merge/i.test(e.type)){var u=g(this._monkeys,o).data;if(f.default.object(u)){l=k(l);var c=g(this._data,o).data;/deep/i.test(l.type)?l.value=w({},w({},c,_(u)),l.value):l.value=O({},w({},c,_(u)),l.value)}}this._transaction.length||(this._previousData=this._data);var d=h.default(this._data,o,l,this.options),p=d.data,v=d.node;if(!("data"in d))return v;var m=o.concat("push"===e.type?v.length-1:[]),P=a(m);return this._data=p,this._affectedPathsIndex[P]=!0,this._transaction.push(O({},e,{path:m})),this._refreshMonkeys(v,o,e.type),this.emit("write",{path:m}),this.options.autoCommit?this.options.asynchronous?(this._future||(this._future=setTimeout(function(){return n.commit()},0)),v):(this.commit(),v):v}},e.prototype.commit=function(){if(!this._transaction.length)return this;this._future&&(this._future=clearTimeout(this._future));var t=Object.keys(this._affectedPathsIndex).map(function(t){return"λ"!==t?t.split("λ").slice(1):[]});if(this.validate(t))return this;var e=this._transaction,n=this._previousData;return this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data,this.emit("update",{paths:t,currentData:this._data,transaction:e,previousData:n}),this},e.prototype.getMonkey=function(t){t=y(t);var e=g(this._monkeys,[].concat(t)).data;return e instanceof u.Monkey?e:null},e.prototype.watch=function(t){return new c.default(this,t)},e.prototype.release=function(){var t=void 0;this.emit("release"),delete this.root,delete this._data,delete this._previousData,delete this._transaction,delete this._affectedPathsIndex,delete this._monkeys;for(t in this._cursors)this._cursors[t].release();delete this._cursors,this.kill()},e.prototype.toJSON=function(){return this.serialize()},e.prototype.toString=function(){return this._identity},e}(s.default);n.default=C,C.monkey=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)throw new Error("Baobab.monkey: missing definition.");return 1===e.length&&"function"!=typeof e[0]?new u.MonkeyDefinition(e[0]):new u.MonkeyDefinition(e)},C.dynamicNode=C.monkey,C.Cursor=l.default,C.MonkeyDefinition=u.MonkeyDefinition,C.Monkey=u.Monkey,C.type=f.default,C.helpers=p,C.VERSION="2.4.3",e.exports=n.default},{"./cursor":3,"./helpers":4,"./monkey":5,"./type":6,"./update":7,"./watcher":8,emmett:1}],3:[function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":d(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!e)throw f.makeError("Baobab.Cursor."+t+": cannot use "+t+" on an unresolved dynamic path.",{path:e})}function s(t,e){h.prototype[t]=function(n,r){if(arguments.length>2)throw f.makeError("Baobab.Cursor."+t+": too many arguments.");if(1!==arguments.length||p[t]||(r=n,n=[]),n=f.coercePath(n),!c.default.path(n))throw f.makeError("Baobab.Cursor."+t+": invalid path.",{path:n});if(e&&!e(r))throw f.makeError("Baobab.Cursor."+t+": invalid value.",{path:n,value:r});if(!this.solvedPath)throw f.makeError("Baobab.Cursor."+t+": the dynamic path of the cursor cannot be solved.",{path:this.path});var o=this.solvedPath.concat(n);return this.tree.update(o,{type:t,value:r})}}n.__esModule=!0;var l=r(t("emmett")),u=t("./monkey"),c=r(t("./type")),f=t("./helpers"),h=function(t){function e(n,r,i){var a=this;o(this,e),t.call(this),r=r||[],this._identity="[object Cursor]",this._archive=null,this.tree=n,this.path=r,this.hash=i,this.state={killed:!1,recording:!1,undoing:!1},this._dynamicPath=c.default.dynamicPath(this.path),this._monkeyPath=c.default.monkeyPath(this.tree._monkeys,this.path),this._dynamicPath?this.solvedPath=f.getIn(this.tree._data,this.path).solvedPath:this.solvedPath=this.path,this._writeHandler=function(t){var e=t.data;!a.state.killed&&f.solveUpdate([e.path],a._getComparedPaths())&&(a.solvedPath=f.getIn(a.tree._data,a.path).solvedPath)};var s=function(t){var e=a,n=Object.defineProperties({},{previousData:{get:function(){return f.getIn(t,e.solvedPath).data},configurable:!0,enumerable:!0},currentData:{get:function(){return e.get()},configurable:!0,enumerable:!0}});return a.state.recording&&!a.state.undoing&&a.archive.add(n.previousData),a.state.undoing=!1,a.emit("update",n)};this._updateHandler=function(t){if(!a.state.killed){var e=t.data,n=e.paths,r=e.previousData,o=s.bind(a,r),i=a._getComparedPaths();return f.solveUpdate(n,i)?o():void 0}};var l=!1;this._lazyBind=function(){if(!l)return l=!0,a._dynamicPath&&a.tree.on("write",a._writeHandler),a.tree.on("update",a._updateHandler)},this._dynamicPath?this._lazyBind():(this.on=f.before(this._lazyBind,this.on.bind(this)),this.once=f.before(this._lazyBind,this.once.bind(this)))}return i(e,t),e.prototype._getComparedPaths=function(){var t=this._monkeyPath?f.getIn(this.tree._monkeys,this._monkeyPath).data.relatedPaths():[];return[this.solvedPath].concat(t)},e.prototype.isRoot=function(){return!this.path.length},e.prototype.isLeaf=function(){return c.default.primitive(this._get().data)},e.prototype.isBranch=function(){return!this.isRoot()&&!this.isLeaf()},e.prototype.root=function(){return this.tree.select()},e.prototype.select=function(t){return arguments.length>1&&(t=f.arrayFrom(arguments)),this.tree.select(this.path.concat(t))},e.prototype.up=function(){return this.isRoot()?null:this.tree.select(this.path.slice(0,-1))},e.prototype.down=function(){if(a("down",this.solvedPath),!(this._get().data instanceof Array))throw Error("Baobab.Cursor.down: cannot go down on a non-list type.");return this.tree.select(this.solvedPath.concat(0))},e.prototype.left=function(){a("left",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.left: cannot go left on a non-list type.");return t?this.tree.select(this.solvedPath.slice(0,-1).concat(t-1)):null},e.prototype.right=function(){a("right",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.right: cannot go right on a non-list type.");return t+1===this.up()._get().data.length?null:this.tree.select(this.solvedPath.slice(0,-1).concat(t+1))},e.prototype.leftmost=function(){a("leftmost",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.leftmost: cannot go left on a non-list type.");return this.tree.select(this.solvedPath.slice(0,-1).concat(0))},e.prototype.rightmost=function(){a("rightmost",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.rightmost: cannot go right on a non-list type.");var e=this.up()._get().data;return this.tree.select(this.solvedPath.slice(0,-1).concat(e.length-1))},e.prototype.map=function(t,e){a("map",this.solvedPath);var n=this._get().data,r=arguments.length;if(!c.default.array(n))throw Error("baobab.Cursor.map: cannot map a non-list type.");return n.map(function(o,i){return t.call(r>1?e:this,this.select(i),i,n)},this)},e.prototype._get=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];if(!c.default.path(t))throw f.makeError("Baobab.Cursor.getters: invalid path.",{path:t});return this.solvedPath?f.getIn(this.tree._data,this.solvedPath.concat(t)):{data:void 0,solvedPath:null,exists:!1}},e.prototype.exists=function(t){return t=f.coercePath(t),arguments.length>1&&(t=f.arrayFrom(arguments)),this._get(t).exists},e.prototype.get=function(t){t=f.coercePath(t),arguments.length>1&&(t=f.arrayFrom(arguments));var e=this._get(t),n=e.data,r=e.solvedPath;return this.tree.emit("get",{data:n,solvedPath:r,path:this.path.concat(t)}),n},e.prototype.clone=function(){var t=this.get.apply(this,arguments);return f.shallowClone(t)},e.prototype.deepClone=function(){var t=this.get.apply(this,arguments);return f.deepClone(t)},e.prototype.serialize=function(t){if(t=f.coercePath(t),arguments.length>1&&(t=f.arrayFrom(arguments)),!c.default.path(t))throw f.makeError("Baobab.Cursor.getters: invalid path.",{path:t});if(this.solvedPath){var e=this.solvedPath.concat(t),n=f.deepClone(f.getIn(this.tree._data,e).data);return function t(e,n){if(c.default.object(n)&&c.default.object(e))for(var r in n)n[r]instanceof u.Monkey?delete e[r]:t(e[r],n[r])}(n,f.getIn(this.tree._monkeys,e).data),n}},e.prototype.project=function(t){if(c.default.object(t)){n={};for(var e in t)n[e]=this.get(t[e]);return n}if(c.default.array(t)){for(var n=[],r=0,o=t.length;r<o;r++)n.push(this.get(t[r]));return n}throw f.makeError("Baobab.Cursor.project: wrong projection.",{projection:t})},e.prototype.startRecording=function(t){if((t=t||1/0)<1)throw f.makeError("Baobab.Cursor.startRecording: invalid max records.",{value:t});return this.state.recording=!0,this.archive?this:(this._lazyBind(),this.archive=new f.Archive(t),this)},e.prototype.stopRecording=function(){return this.state.recording=!1,this},e.prototype.undo=function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(!this.state.recording)throw new Error("Baobab.Cursor.undo: cursor is not recording.");var e=this.archive.back(t);if(!e)throw Error("Baobab.Cursor.undo: cannot find a relevant record.");return this.state.undoing=!0,this.set(e),this},e.prototype.hasHistory=function(){return!(!this.archive||!this.archive.get().length)},e.prototype.getHistory=function(){return this.archive?this.archive.get():[]},e.prototype.clearHistory=function(){return this.archive&&this.archive.clear(),this},e.prototype.release=function(){this._dynamicPath&&this.tree.off("write",this._writeHandler),this.tree.off("update",this._updateHandler),this.hash&&delete this.tree._cursors[this.hash],delete this.tree,delete this.path,delete this.solvedPath,delete this.archive,this.kill(),this.state.killed=!0},e.prototype.toJSON=function(){return this.serialize()},e.prototype.toString=function(){return this._identity},e}(l.default);n.default=h,"function"==typeof Symbol&&void 0!==Symbol.iterator&&(h.prototype[Symbol.iterator]=function(){var t=this._get().data;if(!c.default.array(t))throw Error("baobab.Cursor.@@iterate: cannot iterate a non-list type.");var e=0,n=this,r=t.length;return{next:function(){return e<r?{value:n.select(e++)}:{done:!0}}}});var p={unset:!0,pop:!0,shift:!0};s("set"),s("unset"),s("apply",c.default.function),s("push"),s("concat",c.default.array),s("unshift"),s("pop"),s("shift"),s("splice",c.default.splicer),s("merge",c.default.object),s("deepMerge",c.default.object),e.exports=n.default},{"./helpers":4,"./monkey":5,"./type":6,emmett:1}],4:[function(t,e,n){(function(e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=void 0,r=void 0;for(n=0,r=t.length;n<r;n++)if(e(t[n]))return n;return-1}function i(t){var e=new Array(t.length),n=void 0,r=void 0;for(n=0,r=t.length;n<r;n++)e[n]=t[n];return e}function a(t){return i(t)}function s(t,e){return function(){t.apply(null,arguments),e.apply(null,arguments)}}function l(t){var e=t.source,n="";return t.global&&(n+="g"),t.multiline&&(n+="m"),t.ignoreCase&&(n+="i"),t.sticky&&(n+="y"),t.unicode&&(n+="u"),new RegExp(e,n)}function u(t,n){if(!n||"object"!==(void 0===n?"undefined":d(n))||n instanceof Error||n instanceof _.MonkeyDefinition||n instanceof _.Monkey||"ArrayBuffer"in e&&n instanceof ArrayBuffer)return n;if(w.default.array(n)){if(t){var r=[],o=void 0,a=void 0;for(o=0,a=n.length;o<a;o++)r.push(u(!0,n[o]));return r}return i(n)}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return l(n);if(w.default.object(n)){var s={},o=void 0,a=void 0,c=void 0,f=Object.getOwnPropertyNames(n);for(o=0,a=f.length;o<a;o++)c=f[o],w.default.lazyGetter(n,c)?Object.defineProperty(s,c,{get:Object.getOwnPropertyDescriptor(n,c).get,enumerable:!0,configurable:!0}):Object.defineProperty(s,c,{value:t?u(!0,n[c]):n[c],enumerable:Object.getOwnPropertyDescriptor(n,c).enumerable,writable:!0,configurable:!0});return s}return n}function c(t){return t||0===t||""===t?t:[]}function f(t,e){var n=!0,r=void 0;if(!t)return!1;for(r in e)if(w.default.object(e[r]))n=n&&f(t[r],e[r]);else if(w.default.array(e[r]))n=n&&!!~e[r].indexOf(t[r]);else if(t[r]!==e[r])return!1;return n}function h(t,e){if(!("object"!==(void 0===e?"undefined":d(e))||null===e||e instanceof _.Monkey)&&(Object.freeze(e),t))if(Array.isArray(e)){var n=void 0,r=void 0;for(n=0,r=e.length;n<r;n++)h(!0,e[n])}else{var o=void 0,i=void 0;for(i in e)w.default.lazyGetter(e,i)||(o=e[i])&&O.call(e,i)&&"object"===(void 0===o?"undefined":d(o))&&!Object.isFrozen(o)&&h(!0,o)}}function p(t,e){if(!e)return T;var n=[],r=!0,i=t,a=void 0,s=void 0,l=void 0;for(s=0,l=e.length;s<l;s++){if(!i)return{data:void 0,solvedPath:n.concat(e.slice(s)),exists:!1};if("function"==typeof e[s]){if(!w.default.array(i))return T;if(!~(a=o(i,e[s])))return T;n.push(a),i=i[a]}else if("object"===d(e[s])){if(!w.default.array(i))return T;if(!~(a=o(i,function(t){return f(t,e[s])})))return T;n.push(a),i=i[a]}else n.push(e[s]),r="object"===(void 0===i?"undefined":d(i))&&e[s]in i,i=i[e[s]]}return{data:i,solvedPath:n,exists:r}}function v(t,e){var n=new Error(t);for(var r in e)n[r]=e[r];return n}function y(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=n[0],i=void 0,a=void 0,s=void 0,l=void 0;for(a=1,s=n.length;a<s;a++){i=n[a];for(l in i)!t||!w.default.object(i[l])||i[l]instanceof _.Monkey?o[l]=i[l]:o[l]=y(!0,o[l]||{},i[l])}return o}function m(t,e){for(var n=[],r=0,o=(e=[].concat(e)).length;r<o;r++){var i=e[r];"."===i?r||(n=t.slice(0)):".."===i?n=(r?n:t).slice(0,-1):n.push(i)}return n}function g(t,e){var n=void 0,r=void 0,o=void 0,i=void 0,a=void 0,s=void 0,l=void 0,u=void 0;for(n=0,i=t.length;n<i;n++){if(!(l=t[n]).length)return!0;for(r=0,a=e.length;r<a;r++){if(!(u=e[r])||!u.length)return!0;for(o=0,s=u.length;o<s&&u[o]==l[o];o++)if(o+1===s||o+1===l.length)return!0}}return!1}function b(t,e,n){for(var r=arguments.length,i=Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];if(void 0===n&&2===arguments.length)n=t.length-e;else if(null===n||void 0===n)n=0;else if(isNaN(+n))throw new Error("argument nb "+n+" can not be parsed into a number!");return n=Math.max(0,n),w.default.function(e)&&(e=o(t,e)),w.default.object(e)&&(e=o(t,function(t){return f(t,e)})),e>=0?t.slice(0,e).concat(i).concat(t.slice(e+n)):t.slice(0,t.length+e).concat(i).concat(t.slice(t.length+e+n))}n.__esModule=!0,n.arrayFrom=a,n.before=s,n.coercePath=c,n.getIn=p,n.makeError=v,n.solveRelativePath=m,n.solveUpdate=g,n.splice=b;var _=t("./monkey"),w=function(t){return t&&t.__esModule?t:{default:t}}(t("./type")),k=Function.prototype,O={}.hasOwnProperty,P=function(){function t(e){r(this,t),this.size=e,this.records=[]}return t.prototype.get=function(){return this.records},t.prototype.add=function(t){return this.records.unshift(t),this.records.length>this.size&&(this.records.length=this.size),this},t.prototype.clear=function(){return this.records=[],this},t.prototype.back=function(t){var e=this.records[t-1];return e&&(this.records=this.records.slice(t)),e},t}();n.Archive=P;var E=u.bind(null,!1),C=u.bind(null,!0);n.shallowClone=E,n.deepClone=C;var j="function"==typeof Object.freeze,x=j?h.bind(null,!1):k,M=j?h.bind(null,!0):k;n.freeze=x,n.deepFreeze=M;var T={data:void 0,solvedPath:null,exists:!1},D=y.bind(null,!1),A=y.bind(null,!0);n.shallowMerge=D,n.deepMerge=A;var L=function(){var t=0;return function(){return t++}}();n.uniqid=L}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./monkey":5,"./type":6}],5:[function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=r(t("./type")),a=r(t("./update")),s=t("./helpers"),l=function t(e){var n=this;o(this,t);var r=i.default.monkeyDefinition(e);if(!r)throw s.makeError("Baobab.monkey: invalid definition.",{definition:e});if(this.type=r,"object"===this.type)this.getter=e.get,this.projection=e.cursors||{},this.paths=Object.keys(this.projection).map(function(t){return n.projection[t]}),this.options=e.options||{};else{var a=1,l={};i.default.object(e[e.length-1])&&(a++,l=e[e.length-1]),this.getter=e[e.length-a],this.projection=e.slice(0,-a),this.paths=this.projection,this.options=l}this.paths=this.paths.map(function(t){return[].concat(t)}),this.hasDynamicPaths=this.paths.some(i.default.dynamicPath)};n.MonkeyDefinition=l;var u=function(){function t(e,n,r){var i=this;o(this,t),this.tree=e,this.path=n,this.definition=r;var a=r.projection,l=s.solveRelativePath.bind(null,n.slice(0,-1));"object"===r.type?(this.projection=Object.keys(a).reduce(function(t,e){return t[e]=l(a[e]),t},{}),this.depPaths=Object.keys(this.projection).map(function(t){return i.projection[t]})):(this.projection=a.map(l),this.depPaths=this.projection),this.state={killed:!1},this.writeListener=function(t){var e=t.data.path;i.state.killed||s.solveUpdate([e],i.relatedPaths())&&i.update()},this.recursiveListener=function(t){var e=t.data,n=e.monkey,r=e.path;i.state.killed||i!==n&&s.solveUpdate([r],i.relatedPaths(!1))&&i.update()},this.tree.on("write",this.writeListener),this.tree.on("_monkey",this.recursiveListener),this.update()}return t.prototype.relatedPaths=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0],n=void 0;return n=this.definition.hasDynamicPaths?this.depPaths.map(function(e){return s.getIn(t.tree._data,e).solvedPath}):this.depPaths,e&&this.depPaths.some(function(e){return!!i.default.monkeyPath(t.tree._monkeys,e)})?n.reduce(function(e,n){var r=i.default.monkeyPath(t.tree._monkeys,n);if(!r)return e.concat([n]);var o=s.getIn(t.tree._monkeys,r).data;return e.concat(o.relatedPaths())},[]):n},t.prototype.update=function(){var t=this.tree.project(this.projection),e=function(t,e,n){var r=null,o=!1;return function(){return o||(r=e.getter.apply(t,"object"===e.type?[n]:n),t.options.immutable&&!1!==e.options.immutable&&s.deepFreeze(r),o=!0),r}}(this.tree,this.definition,t);if(e.isLazyGetter=!0,this.tree.options.lazyMonkeys)this.tree._data=a.default(this.tree._data,this.path,{type:"monkey",value:e},this.tree.options).data;else{var n=a.default(this.tree._data,this.path,{type:"set",value:e(),options:{mutableLeaf:!this.definition.options.immutable}},this.tree.options);"data"in n&&(this.tree._data=n.data)}return this.tree.emit("_monkey",{monkey:this,path:this.path}),this},t.prototype.release=function(){this.tree.off("write",this.writeListener),this.tree.off("_monkey",this.recursiveListener),this.state.killed=!0,delete this.projection,delete this.depPaths,delete this.tree},t}();n.Monkey=u},{"./helpers":4,"./type":6,"./update":7}],6:[function(t,e,n){function r(t,e){return e.some(function(e){return i[e](t)})}n.__esModule=!0;var o=t("./monkey"),i={};i.array=function(t){return Array.isArray(t)},i.object=function(t){return t&&"object"===(void 0===t?"undefined":d(t))&&!Array.isArray(t)&&!(t instanceof Date)&&!(t instanceof RegExp)&&!("function"==typeof Map&&t instanceof Map)&&!("function"==typeof Set&&t instanceof Set)},i.string=function(t){return"string"==typeof t},i.number=function(t){return"number"==typeof t},i.function=function(t){return"function"==typeof t},i.primitive=function(t){return t!==Object(t)},i.splicer=function(t){return!(!i.array(t)||t.length<1)&&(!(t.length>1&&isNaN(+t[1]))&&r(t[0],["number","function","object"]))};var a=["string","number","function","object"];i.path=function(t){return!(!t&&0!==t&&""!==t)&&[].concat(t).every(function(t){return r(t,a)})},i.dynamicPath=function(t){return t.some(function(t){return i.function(t)||i.object(t)})},i.monkeyPath=function(t,e){var n=[],r=t,i=void 0,a=void 0;for(i=0,a=e.length;i<a;i++){if(n.push(e[i]),"object"!==(void 0===r?"undefined":d(r)))return null;if((r=r[e[i]])instanceof o.Monkey)return n}return null},i.lazyGetter=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return n&&n.get&&!0===n.get.isLazyGetter},i.monkeyDefinition=function(t){if(i.object(t))return i.function(t.get)&&(!t.cursors||i.object(t.cursors)&&Object.keys(t.cursors).every(function(e){return i.path(t.cursors[e])}))?"object":null;if(i.array(t)){var e=1;return i.object(t[t.length-1])&&e++,i.function(t[t.length-e])&&t.slice(0,-e).every(function(t){return i.path(t)})?"array":null}return null},i.watcherMapping=function(t){return i.object(t)&&Object.keys(t).every(function(e){return i.path(t[e])})};var s=["set","apply","push","unshift","concat","pop","shift","deepMerge","merge","splice","unset"];i.operationType=function(t){return"string"==typeof t&&!!~s.indexOf(t)},n.default=i,e.exports=n.default},{"./monkey":5}],7:[function(t,e,n){function r(t,e,n){return a.makeError('Baobab.update: cannot apply the "'+t+'" on a non '+e+" (path: /"+n.join("/")+").",{path:n})}function o(t,e,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],s=n.type,l=n.value,u=n.options,c=void 0===u?{}:u,d={root:t},f=["root"].concat(e),h=[],p=d,v=void 0,y=void 0,m=void 0;for(v=0,y=f.length;v<y;v++){if(m=f[v],v>0&&h.push(m),v===y-1){if("set"===s){if(o.pure&&p[m]===l)return{node:p[m]};i.default.lazyGetter(p,m)?Object.defineProperty(p,m,{value:l,enumerable:!0,configurable:!0}):o.persistent&&!c.mutableLeaf?p[m]=a.shallowClone(l):p[m]=l}else if("monkey"===s)Object.defineProperty(p,m,{get:l,enumerable:!0,configurable:!0});else if("apply"===s){var g=l(p[m]);if(o.pure&&p[m]===g)return{node:p[m]};i.default.lazyGetter(p,m)?Object.defineProperty(p,m,{value:g,enumerable:!0,configurable:!0}):o.persistent?p[m]=a.shallowClone(g):p[m]=g}else if("push"===s){if(!i.default.array(p[m]))throw r("push","array",h);o.persistent?p[m]=p[m].concat([l]):p[m].push(l)}else if("unshift"===s){if(!i.default.array(p[m]))throw r("unshift","array",h);o.persistent?p[m]=[l].concat(p[m]):p[m].unshift(l)}else if("concat"===s){if(!i.default.array(p[m]))throw r("concat","array",h);o.persistent?p[m]=p[m].concat(l):p[m].push.apply(p[m],l)}else if("splice"===s){if(!i.default.array(p[m]))throw r("splice","array",h);o.persistent?p[m]=a.splice.apply(null,[p[m]].concat(l)):p[m].splice.apply(p[m],l)}else if("pop"===s){if(!i.default.array(p[m]))throw r("pop","array",h);o.persistent?p[m]=a.splice(p[m],-1,1):p[m].pop()}else if("shift"===s){if(!i.default.array(p[m]))throw r("shift","array",h);o.persistent?p[m]=a.splice(p[m],0,1):p[m].shift()}else if("unset"===s)i.default.object(p)?delete p[m]:i.default.array(p)&&p.splice(m,1);else if("merge"===s){if(!i.default.object(p[m]))throw r("merge","object",h);o.persistent?p[m]=a.shallowMerge({},p[m],l):p[m]=a.shallowMerge(p[m],l)}else if("deepMerge"===s){if(!i.default.object(p[m]))throw r("deepMerge","object",h);o.persistent?p[m]=a.deepMerge({},p[m],l):p[m]=a.deepMerge(p[m],l)}o.immutable&&!c.mutableLeaf&&a.deepFreeze(p);break}i.default.primitive(p[m])?p[m]={}:o.persistent&&(p[m]=a.shallowClone(p[m])),o.immutable&&y>0&&a.freeze(p),p=p[m]}return i.default.lazyGetter(p,m)?{data:d.root}:{data:d.root,node:p[m]}}n.__esModule=!0,n.default=o;var i=function(t){return t&&t.__esModule?t:{default:t}}(t("./type")),a=t("./helpers");e.exports=n.default},{"./helpers":4,"./type":6}],8:[function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":d(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.__esModule=!0;var a=r(t("emmett")),s=r(t("./cursor")),l=r(t("./type")),u=t("./helpers"),c=function(t){function e(n,r){var i=this;o(this,e),t.call(this),this.tree=n,this.mapping=null,this.state={killed:!1},this.refresh(r),this.handler=function(t){if(!i.state.killed){var e=i.getWatchedPaths();return u.solveUpdate(t.data.paths,e)?i.emit("update"):void 0}},this.tree.on("update",this.handler)}return i(e,t),e.prototype.getWatchedPaths=function(){var t=this;return Object.keys(this.mapping).map(function(e){var n=t.mapping[e];return n instanceof s.default?n.solvedPath:t.mapping[e]}).reduce(function(e,n){if(n=[].concat(n),l.default.dynamicPath(n)&&(n=u.getIn(t.tree._data,n).solvedPath),!n)return e;var r=l.default.monkeyPath(t.tree._monkeys,n);return r?e.concat(u.getIn(t.tree._monkeys,r).data.relatedPaths()):e.concat([n])},[])},e.prototype.getCursors=function(){var t=this,e={};return Object.keys(this.mapping).forEach(function(n){var r=t.mapping[n];r instanceof s.default?e[n]=r:e[n]=t.tree.select(r)}),e},e.prototype.refresh=function(t){if(!l.default.watcherMapping(t))throw u.makeError("Baobab.watch: invalid mapping.",{mapping:t});this.mapping=t;var e={};for(var n in t)e[n]=t[n]instanceof s.default?t[n].path:t[n];this.get=this.tree.project.bind(this.tree,e)},e.prototype.release=function(){this.tree.off("update",this.handler),this.state.killed=!0,this.kill()},e}(a.default);n.default=c,e.exports=n.default},{"./cursor":3,"./helpers":4,"./type":6,emmett:1}]},{},[2])(2)}),dt.state={todoItems:dt.defaults.todoItems,view:dt.defaults.view,editing:dt.defaults.editing};var ft=new Baobab(dt),ht=ft.select(["state","todoItems"]),pt=ft.select(["state","view"]),vt={},yt=function(t){return{click:function(){return Ht("TOGGLE_VIEW",{view:t})}}},mt={click:function(){return Ht("CLEAR_COMPLETED")}},gt=!1,bt=function(t,e){var n=ht.get().filter(function(t){return!1===t.completed}).length;"TOGGLE_ALL_AS_COMPLETED"===t&&(gt=!gt);var r={all:"",active:"",completed:""};return r[pt.get()]="selected",vt.itemsLeft=n||"0",vt.all=yt("all"),vt.active=yt("active"),vt.completed=yt("completed"),vt.clearComplete=mt,vt.clearCompletedButton=gt?"block":"none",vt.viewState=r,ct(vt)},_t=function(){return Z({class:"info"},rt("Double-click to edit a todo"),rt("Created by ",$({href:"https://github.com/julienetie"},"Julien Etienne")),rt("Part of",$({href:"http://todomvc.com"})))},wt=function(t,e){return _t()},kt=function(t){var e=t.returnKey,n=t.heading,r=t.placeholder;return Y({class:"header"},[Q(n),tt({class:"new-todo",autofocus:"autofocus",event:e,placeholder:r})])},Ot=ft.get("content"),Pt=Ot.heading,Et=Ot.placeholder,Ct=(ft.select(["state","todoItems"]),0),jt={returnKey:{keypress:function(t){var e=t.target,n=e.value.trim();13===t.keyCode&&n.length&&(Ct++,Ht("ADD_TODO",{value:n}),e.value="")}},heading:Pt,placeholder:Et},xt=function(t,e){return kt(jt)},Mt=function(t){var e=t.todoList,n=t.toggleAllAsCompleted;return ot({class:"main"},tt({class:"toggle-all",type:"checkbox",event:n}),et({for:"toggle-all"},"Mark all as complete"),st({class:"todo-list"},e))},Tt=function(t){var e=t.value,n=t.toggleComplete,r=t.editing,o=(t.edit,t.completed),i=t.removeTodo,a=t.editTodo,s=t.saveTodo,l=t.editInput,u=t.focusOnInput;return nt({class:o+" "+r,event:a},X({class:"view"},tt({class:"toggle",type:"checkbox",checked:!!o,event:n}),et(e),K({class:"destroy",event:i})),l(e,s,u))},Dt=function(t,e,n){return tt({class:"edit",value:t,event:e,hook:n})},At=function(t){return{click:function(){return Ht("TOGGLE_COMPLETED_TODO",{id:t})}}},Lt=function(t){return{dblclick:function(e){return Ht("EDIT_TODO",{id:t,target:e.target})}}},Bt=function(t,e){var n=function(t,e){var n=t.target.value.trim();""===n?(Ht("REMOVE_TODO",{target:t.target.closest("li"),id:e}),Ht("SAVE_TODO_EDIT",{id:e,text:n})):Ht("SAVE_TODO_EDIT",{id:e,text:n})};return{change:function(e){n(e,t)},blur:function(e){n(e,t)},keyDown:function(e){13===e.which&&n(e,t)}}},St=function(t){return{click:function(e){return Ht("REMOVE_TODO",{target:e.target,id:t})}}},Nt={insert:function(t){var e=t.elm;setTimeout(function(){e.selectionStart=e.selectionEnd=1e4},0),e.focus()}},It=function(t){var e=t.completed,n=t.id,r=t.text,o=t.editing,i={value:r,toggleComplete:At(n),removeTodo:St(n),completed:e?"completed":"",editing:o?"editing":"",editInput:o?Dt:function(){},editTodo:Lt(n),saveTodo:Bt(n),focusOnInput:Nt};return Tt(i)},Rt=ft.select(["state","todoItems"]);ft.set(["state","view"],"all");var zt=ft.select(["state","view"]),Gt=ft.select(["state","editing"]),Ft={click:function(){return Ht("TOGGLE_ALL_AS_COMPLETED")}},Vt=0,qt=!1,Ut=function(t,e){switch(t){case"ADD_TODO":Vt++,Rt.push({id:Vt,completed:!1,editing:!1,text:e.value});break;case"REMOVE_TODO":var n=Rt.get().filter(function(t,n){return e.id!==t.id});Rt.set(n);break;case"TOGGLE_COMPLETED_TODO":var r=Rt.get().map(function(t){return e.id===t.id?{completed:!t.completed,id:t.id,text:t.text,editing:t.editing}:t});Rt.set(r);break;case"TOGGLE_VIEW":zt.set(e.view);break;case"EDIT_TODO":if(!Gt.get()){Gt.set(!0);var o=Rt.get().map(function(t){return e.id===t.id?{completed:t.completed,id:t.id,text:t.text,editing:!t.editing}:t});Rt.set(o)}break;case"SAVE_TODO_EDIT":var i=Rt.get().map(function(t){return e.id===t.id?{completed:t.completed,id:t.id,text:e.text,editing:!1}:t});Rt.set(i),Gt.set(!1);break;case"TOGGLE_ALL_AS_COMPLETED":qt=!qt;var a=Rt.get().map(function(t){return{completed:qt,id:t.id,text:t.text,editing:t.editing}});Rt.set(a);break;case"CLEAR_COMPLETED":var s=Rt.get().filter(function(t){return!t.completed});Rt.set(s)}var l=zt.get(),u=Rt.get().filter(function(t){return{active:!t.completed,all:t,completed:t.completed}[l]}).map(function(t){return It(t)});return Mt({todoList:u,toggleAllAsCompleted:Ft})},Ht=function(t,e){var n=X(ot({class:"todoapp"},xt(),Ut(t,e),bt(t)),wt());ut("#root",n)};Ht()});
//# sourceMappingURL=app.js.map
